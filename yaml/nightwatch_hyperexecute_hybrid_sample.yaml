version: 0.1
globalTimeout: 90
testSuiteTimeout: 90
testSuiteStep: 90

autosplit: true
retryOnFailure: true
parallelism: 1
concurrency: 2

matrix:
  os: ["win","linux", "mac"]

runson: ${matrix.os}

cacheKey: '{{ checksum "package-lock.json" }}'
cacheDirectories:
  - node_modules

pre:
  - npm install

mergeArtifacts: true
uploadArtifacts:
  - name: Reports
    path:
      - reports/
  
report: true
partialReports:
    type: json
    location: reports/
    frameworkName: extent

testDiscovery:
  type: raw
  mode: dynamic
  command: node -e "const c = require('./nightwatch.conf.js'); console.log(Object.keys(c.test_settings).filter(k => ['chrome','firefox','edge'].includes(k)).join('\n'))"

testRunnerCommand: ./node_modules/.bin/nightwatch -e $test

jobLabel: [selenium-Nightwatch, hybrid]
