version: 0.1
globalTimeout: 90
testSuiteTimeout: 90
testSuiteStep: 90
retryOnFailure: true
runson: win
maxRetries: 2
concurrency: 3
autosplit: true
pre:
  - npm install
  
cacheKey: '{{ checksum "package-lock.json" }}'
cacheDirectories:
  - node_modules

testDiscovery:
  type: raw
  mode: static
  command: node -e "const c = require('./nightwatch.conf.js'); console.log(Object.keys(c.test_settings).filter(k => ['chrome','firefox','edge'].includes(k)).join('\n'))"

testRunnerCommand: ./node_modules/.bin/nightwatch -e $test

uploadArtefacts:
  - name: Reports
    path: 
      - reports/
  
env:
  LT_ACCESS_KEY: ${{.secrets.LT_ACCESS_KEY}}
  LT_USERNAME: LT_USERNAME

jobLabel: [selenium-Nightwatch, win, autosplit, static-discovery]
